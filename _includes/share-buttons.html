<div class="share-section">
  <span class="share-label">Share</span>
  <div class="share-buttons">
    <button class="share-btn share-copy" id="share-copy" title="Copy link">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
      </svg>
      <span class="share-copy-toast" id="share-copy-toast">Copied!</span>
    </button>
    <button class="share-btn share-wechat" id="share-wechat" title="WeChat">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <path d="M8.691 2.188C3.891 2.188 0 5.476 0 9.53c0 2.212 1.17 4.203 3.002 5.55a.59.59 0 0 1 .213.665l-.39 1.48c-.019.07-.048.141-.048.213 0 .163.13.295.29.295a.326.326 0 0 0 .167-.054l1.903-1.114a.864.864 0 0 1 .717-.098 10.16 10.16 0 0 0 2.837.403c.276 0 .543-.027.811-.05a6.093 6.093 0 0 1-.247-1.704c0-3.526 3.39-6.4 7.585-6.4.276 0 .543.027.811.05C16.918 4.576 13.147 2.188 8.691 2.188zm-2.6 4.408c-.58 0-1.05-.47-1.05-1.05s.47-1.05 1.05-1.05 1.05.47 1.05 1.05-.47 1.05-1.05 1.05zm5.2 0c-.58 0-1.05-.47-1.05-1.05s.47-1.05 1.05-1.05 1.05.47 1.05 1.05-.47 1.05-1.05 1.05zM23.76 15.7c0-3.338-3.39-6.05-7.585-6.05-4.194 0-7.584 2.712-7.584 6.05 0 3.339 3.39 6.05 7.584 6.05.89 0 1.752-.127 2.55-.363a.733.733 0 0 1 .607.083l1.614.946a.276.276 0 0 0 .142.046c.136 0 .246-.113.246-.25 0-.06-.024-.12-.04-.18l-.33-1.255a.5.5 0 0 1 .18-.563c1.553-1.143 2.616-2.833 2.616-4.514zm-10.064-.91c-.492 0-.891-.4-.891-.891s.4-.89.891-.89.891.399.891.89-.4.891-.891.891zm4.958 0c-.492 0-.891-.4-.891-.891s.4-.89.891-.89.891.399.891.89-.4.891-.891.891z"/>
      </svg>
    </button>
    <a class="share-btn share-twitter" href="https://twitter.com/intent/tweet?url={{ page.url | absolute_url | url_encode }}&text={{ page.title | url_encode }}" target="_blank" rel="noopener" title="X (Twitter)">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
      </svg>
    </a>
  </div>
</div>

<!-- WeChat QR modal -->
<div class="wechat-modal" id="wechat-modal">
  <div class="wechat-modal-backdrop" id="wechat-modal-backdrop"></div>
  <div class="wechat-modal-content">
    <p>Copy the link and share in WeChat:</p>
    <input type="text" class="wechat-link-input" id="wechat-link-input" readonly>
    <button class="wechat-copy-btn" id="wechat-copy-btn">Copy Link</button>
    <button class="wechat-close-btn" id="wechat-close-btn">&times;</button>
  </div>
</div>

<script>
(function() {
  var pageUrl = window.location.href;

  // Copy link
  var copyBtn = document.getElementById('share-copy');
  var copyToast = document.getElementById('share-copy-toast');
  if (copyBtn) {
    copyBtn.addEventListener('click', function() {
      navigator.clipboard.writeText(pageUrl).then(function() {
        copyToast.classList.add('active');
        setTimeout(function() { copyToast.classList.remove('active'); }, 2000);
      });
    });
  }

  // WeChat share
  var wechatBtn = document.getElementById('share-wechat');
  var wechatModal = document.getElementById('wechat-modal');
  var wechatBackdrop = document.getElementById('wechat-modal-backdrop');
  var wechatInput = document.getElementById('wechat-link-input');
  var wechatCopy = document.getElementById('wechat-copy-btn');
  var wechatClose = document.getElementById('wechat-close-btn');

  if (wechatBtn) {
    wechatBtn.addEventListener('click', function() {
      wechatInput.value = pageUrl;
      wechatModal.classList.add('active');
    });
  }
  if (wechatClose) wechatClose.addEventListener('click', function() { wechatModal.classList.remove('active'); });
  if (wechatBackdrop) wechatBackdrop.addEventListener('click', function() { wechatModal.classList.remove('active'); });
  if (wechatCopy) {
    wechatCopy.addEventListener('click', function() {
      wechatInput.select();
      navigator.clipboard.writeText(pageUrl).then(function() {
        wechatCopy.textContent = 'Copied!';
        setTimeout(function() { wechatCopy.textContent = 'Copy Link'; }, 2000);
      });
    });
  }
})();
</script>
