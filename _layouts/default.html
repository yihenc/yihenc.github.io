<!doctype html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">

  {% include head.html %}

  <body>
    <div class="site-wrapper">

      {%- assign cover_image = site.cover_image -%}
      {%- if page.cover_image -%}
        {%- assign cover_image = page.cover_image -%}
      {%- endif -%}

      <!-- Hero with subtle wallpaper -->
      {% if page.layout == 'home' or page.layout == 'page' %}
      <div class="site-hero{% if page.layout == 'page' %} site-hero-compact{% endif %}" {% if cover_image %}style="background-image: url({{ cover_image | relative_url }})"{% endif %}>
        {% if page.layout == 'home' %}
        <div class="site-hero-inner">
          <div class="hero-identity">
            {% if site.avatar -%}
              {%- if site.avatar contains "://" -%}
                {%- assign avatar = site.avatar -%}
              {%- else -%}
                {%- assign avatar = site.avatar | relative_url -%}
              {%- endif -%}
              <img src="{{ avatar }}" class="hero-avatar" alt="{{ site.author.name }}">
            {%- endif %}
            <div class="hero-text">
              <h1>{{ site.title }}</h1>
              <p>{{ site.description }}</p>
            </div>
          </div>
        </div>
        {% endif %}
      </div>
      {% endif %}

      <!-- Navigation -->
      <nav class="site-nav{% unless page.layout == 'home' or page.layout == 'page' %} site-nav-with-brand{% endunless %}">
        <div class="site-nav-inner">
          {% unless page.layout == 'home' or page.layout == 'page' %}
          <a href="{{ '/' | relative_url }}" class="site-nav-brand">{{ site.title }}</a>
          {% endunless %}
          {%- if site.data.navigation -%}
          <ul class="site-nav-links">
            {%- for nav in site.data.navigation -%}
              <li>
                <a href="{{ nav.url | relative_url }}"{% if page.url == nav.url %} class="active"{% endif %}>{{ nav.title | escape }}</a>
              </li>
            {%- endfor -%}
          </ul>
          {%- endif -%}
          {% if site.data.social -%}
          <div class="site-nav-social">
            {% for social in site.data.social -%}
              <a href="{{ social.url }}" title="{{ social.title }}">
                <i class="{{ social.icon | default: 'fas fa-link' }}"></i>
              </a>
            {%- endfor %}
          </div>
          {%- endif %}
        </div>
      </nav>

      <!-- Main Content -->
      <div class="site-content">
        {{ content }}
      </div>

      <!-- Footer -->
      <footer class="site-footer">
        {%- assign year_from = site.posts[-1].date | date: '%Y' -%}
        {%- assign year_to   = site.time | date: '%Y' -%}
        {%- if year_from == nil or year_from == year_to -%}
          {%- assign year_string = year_from -%}
        {%- else -%}
          {%- assign year_string = year_from | append: '&nbsp;-&nbsp;' | append: year_to -%}
        {%- endif -%}
        <small>
          &copy; {{ year_string }} {% if site.author %}<a href="{{ site.author.url }}">{{ site.author.name }}</a>{% endif %}
        </small>
      </footer>

    </div>

    <script async src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>

    {%- if page.math -%}
      {% include mathjax.html %}
    {%- endif -%}

    {%- if jekyll.environment == 'production' and site.google_analytics -%}
      {%- include google-analytics.html -%}
    {%- endif -%}
  </body>
</html>
