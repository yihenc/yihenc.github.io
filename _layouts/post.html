---
layout: default
---

<article class="post{% if page.toc %} post-with-toc{% endif %}">
  <div class="post-header">
    <h1 class="post-title">{{ page.title }}</h1>
    <div class="post-meta">
      {%- assign date_format = site.date_format | default: "%-d %b %Y" -%}
      <time datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">{{ page.date | date: date_format }}</time>
      {%- if page.last_modified_at -%}
        <span>&middot;</span>
        {%- assign mdate = page.last_modified_at | date_to_xmlschema -%}
        <time datetime="{{ mdate }}" itemprop="dateModified">
          Updated {{ mdate | date: date_format }}
        </time>
      {%- endif -%}
      {%- if page.author -%}
        <span>&middot;</span>
        {% for author in page.author %}
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            {{ author }}
          </span>
          {%- if forloop.last == false %}, {% endif -%}
        {% endfor %}
      {%- endif -%}
    </div>
  </div>

  {% if page.toc %}
  <aside class="toc-sidebar" id="toc-sidebar">
    <button class="toc-toggle" id="toc-toggle" aria-label="Toggle table of contents">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2 3h12M2 8h8M2 13h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      <span class="toc-toggle-label">Contents</span>
    </button>
    <div class="toc-content" id="toc-content">
      <h2 class="toc-title">Contents</h2>
      <nav class="toc-nav">
        {% include toc.html html=content h_min=2 h_max=3 skipNoIDs=true class="toc" %}
      </nav>
    </div>
  </aside>
  {% endif %}

  {{ content }}

  {% if page.tags.size > 0 %}
    {% include post-tags.html %}
  {% endif %}

  {% include share-buttons.html %}

  {% if jekyll.environment == "production" and site.disqus and page.comments != false %}
    {% include disqus.html %}
  {% endif %}
</article>

{% if site.related_posts != empty %}
<aside class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    {% for post in site.related_posts limit:3 %}
      <li>
        <a href="{{ post.url | relative_url }}">
          {{ post.title }}
          <small><time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date_to_string }}</time></small>
        </a>
      </li>
    {% endfor %}
  </ul>
</aside>
{% endif %}

<script>
// TOC sidebar toggle
(function() {
  var toggle = document.getElementById('toc-toggle');
  var sidebar = document.getElementById('toc-sidebar');
  if (!toggle || !sidebar) return;

  toggle.addEventListener('click', function() {
    sidebar.classList.toggle('toc-sidebar-open');
  });

  var tocLinks = sidebar.querySelectorAll('.toc-nav a');
  tocLinks.forEach(function(link) {
    link.addEventListener('click', function() {
      if (window.innerWidth <= 1280) {
        sidebar.classList.remove('toc-sidebar-open');
      }
    });
  });
})();
</script>
